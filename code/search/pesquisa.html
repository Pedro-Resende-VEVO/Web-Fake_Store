<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lojinha</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <link rel="stylesheet" href="pesquisa.css">
</head>

<body id="js">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>

<body>
    <!--Cabeçalho-->
    <header>


        <a href="index.html"><img id="logo" src="Screenshot_32.png" width="80%"></a>
        <div class="part1">
            <a href="index.html">
                <h3 id="sese">Welcome Sese!</h3>
            </a>


            <!--Pesquisa-->
            <nav id="pesquisa">
                <div>
                    <input type="text" id="textPes" placeholder="Search for a product">
                </div>
                <div onclick="pes()">
                    <form>
                        <button>Search</button>
                    </form>
                </div>
            </nav>
        </div>

        <!--Navbar-->

        <div class="part2">
            <ul class="nav">

                <li class="nav-item">
                    <h5><a class="nav-link" href="#">Sign in</a>
                </li>
                <li class="nav-item">
                    <h5><a class="nav-link" href="#">Register</a>
                </li>
                <li class="nav-item">
                    <h5><a class="nav-link" href="#">My Accont</a>
                </li>
                <li class="nav-item">
                    <h5><a class="nav-link" href="#">Track Order</a>
                </li>
            </ul>

            <!--Info e carrinho-->
            <span>
                <div id="info">
                    Cash on Delivery | 30 days return <br> 24/7 Customer Service <b> 1 800 00 11 22 </b>
                    <div>
                        <button>
                            <img src="carrinho.png" width="5%">
                            MY CART
                        </button>
                    </div>
                </div>
            </span>
        </div>

    </header>

    <main>
        <div id="aviso"></div>
        <br>
        <div class="container text-center">
            <div id="tela"></div>
        </div>
        <div id="avisoCat"></div>
        <br>
        <div class="container text-center">
            <div id="tela2"></div>
        </div>
    </main>

    <!--Rodapé-->

    <div class="baixo">
        <section id="rodape">
            <div class="container text-center">
                <div class="row">
                    <div class="col">
                        <div class="metodos">
                            <b>Payment Methods: </b><br><br>
                            <img src="Visa_Inc._logo.svg.png" width="20%"><br>
                            <img src="fatura-mastercard.png" width="20%"><br>
                            <img src="American-Express-Logo.png" width="20%"><br>
                            <img src="PayPal-Logo.png" width="20%"><br>
                            <img src="cash-on-delivery-icon-12.jpg" width="20%"><br>
                        </div>
                    </div>
                    <div class="col">
                        <div class="links">
                            <b>Quick Links</b><br><br>
                            <a href="#">Help</a><br>
                            <a href="#">Shipping Policy</a><br>
                            <a href="#">Cancelation & Returns</a><br>
                            <a href="#">FAQ</a><br>
                            <a href="#">Privacy Policy</a><br>
                            <a href="#">Disclamer</a>
                        </div>
                    </div>
                    <div class="col">
                        <div class="redes">
                            <b>Lets be social</b> <br> <br>
                            <img src="fb_icon_325x325.png" width="20%">
                            <img src="Instagram-Icon.png" width="20%">
                        </div>
                    </div>
                    <div class="col">
                        <div class="contato">
                            <b>Contact us</b> <br> <br>
                            <p>Address line one <br> Street no <br> Place</p>

                            <img src="5613972.png" width="10%"><a href="">info@company.com</a> <br>

                            <img src="94915.png" width="10%"> <em>1 800 4400 22</em>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    </section>

    <footer>&copy 2023 Sl3nc.com</footer>

    <script>

        let dados = sessionStorage.getItem("chave");
        let dadosTitle = sessionStorage.getItem("chaveTitle");

        $.ajax({
            url: 'https://fakestoreapi.com/products'
        })
            .done(response => {

                let tela = document.getElementById("tela");
                let tela2 = document.getElementById("tela2");
                let strHtml = '';
                let strHtml2 = '';
                let contador = 0;


                for (let i = 0; i <= 19; i++) {
                    if (dadosTitle == response[i].title || dados == response[i].title) {
                        contador++;
                        document.getElementById('aviso').innerHTML = `<h3>Produto selecionado:</h3>`
                        strHtml += `<div class="row" onclick="deta(${i + 1})" id="linha">
                                        <div class="col">
                                            <img src="${response[i].image}" id="produ">
                                            <div id="texto"><h5>
                                            ${response[i].title}</h5> <hr> <p id="desc">${'Descrição: ' + response[i].description}</p> <p id="preco"> ${'Preço: R$' + response[i].price}</p>
                                            </div>
                                        </div>
                                    </div><br>`
                    }
                    if (dados == response[i].category) {
                        contador++;
                        document.getElementById('avisoCat').innerHTML = `<h3>Categoria selecionada:</h3>`
                        strHtml2 += `<div class="row" onclick="deta(${i + 1})" id="linha">
                                        <div class="col">
                                            <img src="${response[i].image}" id="produ">
                                            <div id="texto"><h5>
                                            ${response[i].title}</h5> <hr> <p id="desc">${'Descrição: ' + response[i].description}</p> <p id="preco"> ${'Preço: R$' + response[i].price}</p>
                                            </div>
                                        </div>
                                    </div>`
                    }
                }


                if (contador == 0) {
                    for (let i = 0; i <= 19; i++) {
                        document.getElementById('aviso').innerHTML = `<h4>O produto pesquisado não está em nosso catálogo :( <br> Porém estes estão:`
                        strHtml += `<div class="row" onclick="deta(${i + 1})" id="linha">
                                        <div class="col">
                                            <img src="${response[i].image}" id="produ">
                                            <div id="texto"><h5>
                                            ${response[i].title}</h5> <hr> <p id="desc">${'Descrição: ' + response[i].description}</p> <p id="preco"> ${'Preço: R$' + response[i].price}</p>
                                            </div>
                                        </div>
                                    </div>`
                    }
                }
                tela.innerHTML = strHtml;
                tela2.innerHTML = strHtml2;
            })

        function deta(valor) {
            window.location.href = "detalhes.html?produto=" + valor;
        }

        function pes() {
            // var dados = JSON.stringify($('#textPes').val());
            var dados = document.querySelector('#textPes').value;
            sessionStorage.setItem('chave', dados);
        }
    </script>
</body>

</html>